<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For Lara ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background: linear-gradient(135deg, #ffe6e6 0%, #ffc3c3 100%);
            overflow: hidden;
            position: relative;
            overscroll-behavior: none;
            user-select: none; 
            -webkit-user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        #game-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(8px);
            z-index: 2000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: #ff4d4d;
            text-align: center;
            transition: opacity 0.8s ease;
        }

        #intro-content {
            transition: opacity 0.5s;
        }

        .start-btn {
            background: linear-gradient(to right, #ff758c, #ff7eb3);
            color: white;
            padding: 15px 40px;
            font-size: 1.5rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-family: 'Indie Flower', cursive;
            box-shadow: 0 10px 20px rgba(255, 117, 140, 0.4);
            animation: pulse 2s infinite;
            margin-top: 20px;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        #catcher-ui {
            display: none;
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
        }

        .catch-heart {
            position: absolute;
            font-size: 4rem; 
            cursor: pointer;
            user-select: none;
            filter: drop-shadow(0 5px 5px rgba(255, 100, 100, 0.3));
            animation: floatIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transition: transform 0.1s;
        }

        .catch-heart:active {
            transform: scale(0.9);
        }

        @keyframes floatIn {
            0% { transform: scale(0) translateY(20px); opacity: 0; }
            100% { transform: scale(1) translateY(0); opacity: 1; }
        }

        #score-board {
            position: absolute;
            top: 10%;
            width: 100%;
            text-align: center;
            font-family: 'Indie Flower', cursive;
            font-size: 2.5rem;
            font-weight: bold;
            color: #ff4d4d;
            text-shadow: 2px 2px 0px white;
            pointer-events: none;
        }

        .heart-bg {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }
        
        .heart-bg .heart-item {
            position: absolute;
            display: block;
            font-size: 1.5rem;
            animation: floatUp 15s linear infinite;
            bottom: -100px;
            opacity: 0.7;
        }

        @keyframes floatUp {
            0% { transform: translateY(0) rotate(0deg); opacity: 0.8; }
            100% { transform: translateY(-120vh) rotate(360deg); opacity: 0; }
        }

        .container {
            text-align: center;
            position: relative;
            z-index: 10;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px 20px;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(255, 100, 100, 0.2);
            width: 90%; 
            max-width: 400px;
            display: none; 
            max-height: 90vh;
            overflow-y: auto;
            border: 4px solid #ffe6e6;
        }

        h1 {
            color: #ff4d4d;
            font-family: 'Indie Flower', cursive;
            font-size: 2.2rem;
            margin-bottom: 20px;
            line-height: 1.2;
        }

        .gif-container img {
            max-width: 100%;
            width: 220px;
            height: auto;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            margin-bottom: 15px;
        }

        .btn-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        button {
            padding: 12px 25px;
            font-size: 1.1rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            font-weight: 600;
            font-family: 'Poppins', sans-serif;
        }

        #yesBtn {
            background: linear-gradient(to right, #ff4d4d, #ff0055);
            color: white;
            box-shadow: 0 6px 20px rgba(255, 77, 77, 0.4);
            /* Added transition for smooth growing */
            transition: font-size 0.2s ease, padding 0.2s ease; 
        }

        #noBtn {
            background-color: #fff0f0;
            color: #555;
            border: 2px solid #ffe6e6;
        }

        #reasonBtn {
            background-color: #fff;
            color: #ff4d4d;
            border: 2px solid #ff4d4d;
            margin-top: 15px;
            width: 100%;
            font-size: 0.9rem;
            padding: 10px;
        }

        #reason-display {
            margin-top: 15px;
            font-family: 'Indie Flower', cursive;
            color: #d63333;
            font-size: 1.3rem;
            min-height: 40px;
            font-weight: bold;
            line-height: 1.3;
        }

        #date-planner {
            display: none;
            margin-top: 20px;
            border-top: 2px dashed #ffcccc;
            padding-top: 20px;
            animation: fadeIn 1s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        select, input[type="text"] {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border-radius: 10px;
            border: 1px solid #ff9999;
            font-family: 'Poppins', sans-serif;
            background: #fffafa;
            font-size: 1rem;
            box-sizing: border-box;
            color: #444;
        }

        #cinema-link-btn {
            display: none;
            background-color: #3b82f6;
            color: white;
            text-decoration: none;
            padding: 10px;
            border-radius: 10px;
            margin: 10px 0;
            width: 100%;
            box-sizing: border-box;
            font-size: 0.9rem;
            font-weight: bold;
        }

        #sub-options-container, #extra-input-container {
            display: none;
        }

        .whatsapp-btn {
            background-color: #25D366;
            color: white;
            width: 100%;
            margin-top: 15px;
            padding: 15px;
            font-size: 1.2rem;
            box-shadow: 0 4px 10px rgba(37, 211, 102, 0.4);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div id="game-overlay">
        <div id="intro-content">
            <h1 style="font-size: 3rem; margin-bottom: 10px;">Just For You, my love! ‚ù§Ô∏è</h1>
            <p style="font-size: 1.2rem; color: #d63333;">Catch 10 hearts to unlock my message...</p>
            <button class="start-btn" onclick="startGame()">Start Game!</button>
        </div>

        <div id="catcher-ui">
            <div id="score-board">0 / 10</div>
        </div>
    </div>

    <div class="heart-bg" id="heartBg"></div>

    <div class="container" id="mainContainer">
        
        <div class="gif-container">
            <img id="mainImage" src="image.png" alt="Cute bear">
        </div>
        
        <h1 id="question">Lara, will you be my Valentine?</h1>
        
        <div class="btn-container" id="initial-buttons">
            <button id="yesBtn" onclick="handleYes()">Yes</button>
            <button id="noBtn" onclick="handleNo()">No</button>
            <button id="reasonBtn" onclick="showReason()">‚ú® Click for a reason why</button>
        </div>

        <div id="reason-display"></div>

        <div id="date-planner">
            <h3 style="color: #ff4d4d; font-family: 'Indie Flower'; margin: 0;">Plan our Date!</h3>
            
            <label style="display:block; margin-top:15px; font-weight:bold; color:#555; text-align:left;">What are we doing first?</label>
            <select id="main-activity-select" onchange="updateSubOptions()">
                <option value="" disabled selected>Tap to choose...</option>
                <option value="Dine Out">üçΩÔ∏è Dine Out</option>
                <option value="Cinema">üé¨ Cinema</option>
                <option value="Car Ride">üöó Car Ride</option>
                <option value="Coffee Date">‚òï Coffee Date</option>
                <option value="Beach Date">üåä Beach Date</option>
                <option value="Surprise Me">üéÅ Surprise Me</option>
                <option value="Other">üí° I have another idea</option>
            </select>

            <div id="sub-options-container">
                <label id="sub-label" style="display:block; margin-top:10px; font-weight:bold; color:#555; text-align:left;">Details?</label>
                <select id="sub-activity-select" onchange="handleSubSelection()">
                </select>
            </div>

            <a id="cinema-link-btn" href="#" target="_blank">üçø Check Movies & Showtimes</a>

            <div id="extra-input-container">
                <input type="text" id="extra-input" placeholder="Type here...">
            </div>

            <button class="whatsapp-btn" onclick="sendWhatsapp()">Send to Seifoo üíå</button>
        </div>
    </div>

    <script>
        const yourPhoneNumber = "201278560508"; 

        // --- GAME VARIABLES ---
        let heartsCaught = 0;
        const heartsToCatch = 10;
        let spawnInterval;
        let gameActive = false;

        const gameOverlay = document.getElementById('game-overlay');
        const introContent = document.getElementById('intro-content');
        const catcherUI = document.getElementById('catcher-ui');
        const scoreBoard = document.getElementById('score-board');
        const mainContainer = document.getElementById('mainContainer');

        function startGame() {
            introContent.style.opacity = '0';
            setTimeout(() => {
                introContent.style.display = 'none';
                catcherUI.style.display = 'block';
                gameActive = true;
                spawnInterval = setInterval(spawnHeart, 600); 
            }, 500);
        }

        function spawnHeart() {
            if (!gameActive) return;

            const heart = document.createElement('div');
            heart.classList.add('catch-heart');
            const emojis = ["‚ù§Ô∏è", "üíñ", "üíù", "üíï"];
            heart.innerText = emojis[Math.floor(Math.random() * emojis.length)];
            
            const x = Math.random() * (window.innerWidth - 100) + 50;
            const y = Math.random() * (window.innerHeight - 200) + 100;
            
            heart.style.left = x + "px";
            heart.style.top = y + "px";
            
            const catchIt = (e) => {
                const rect = heart.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                
                popHeart(centerX, centerY);
                
                heart.remove();
                heartsCaught++;
                scoreBoard.innerText = `${heartsCaught} / ${heartsToCatch}`;
                
                scoreBoard.style.transform = "scale(1.3)";
                setTimeout(() => scoreBoard.style.transform = "scale(1)", 150);

                if (heartsCaught >= heartsToCatch) {
                    winGame();
                }
            };

            heart.onmousedown = catchIt;
            heart.ontouchstart = (e) => { e.preventDefault(); catchIt(e); };

            catcherUI.appendChild(heart);

            setTimeout(() => {
                if(heart.parentNode) {
                    heart.style.opacity = '0';
                    setTimeout(() => heart.remove(), 500);
                }
            }, 1500);
        }

        function popHeart(x, y) {
            const xNorm = x / window.innerWidth;
            const yNorm = y / window.innerHeight;

            confetti({
                particleCount: 30,
                spread: 50,
                origin: { x: xNorm, y: yNorm },
                colors: ['#ff0000', '#ff69b4', '#fff'],
                ticks: 100,
                gravity: 1.2,
                scalar: 0.8,
                disableForReducedMotion: true
            });
        }

        function winGame() {
            gameActive = false;
            clearInterval(spawnInterval);
            scoreBoard.innerText = "YAY! ‚ù§Ô∏è";
            setTimeout(() => {
                gameOverlay.style.opacity = '0';
                setTimeout(() => {
                    gameOverlay.style.display = 'none';
                    mainContainer.style.display = 'block';
                    createBgHearts();
                    triggerBigConfetti();
                }, 800);
            }, 500);
        }

        // --- MAIN PAGE LOGIC ---
        const activities = {
            "Dine Out": {
                label: "What are we eating?",
                options: ["Sushi üç£", "Pizza üçï", "Burgers üçî", "Seafood üêü", "Koshary üçõ", "Pasta üçù", "I have another idea üí°"]
            },
            "Cinema": {
                label: "Which Cinema?",
                options: ["Vox Cinema (City Centre)", "Green Plaza Cinema", "San Stefano Cinema"]
            },
            "Car Ride": { label: null, options: [] },
            "Coffee Date": {
                label: "Where to?",
                options: ["Dunkin' Stanley üç©", "Dunkin' Roushdy üç©", "Kato ‚òï", "I have another idea üí°", "Surprise Me ‚ú®"]
            },
            "Beach Date": { label: null, options: [] },
            "Surprise Me": {
                label: "What vibe are you going for?",
                options: ["Trust you 100% üôà", "Something Chill ‚ùÑÔ∏è", "Something Fancy ‚ú®", "Something Crazy ü§™"]
            },
            "Other": {
                label: null,
                options: []
            }
        };

        const cinemaLinks = {
            "Vox Cinema (City Centre)": "https://egy.voxcinemas.com/showtimes?c=city-centre-alexandria",
            "Green Plaza Cinema": "https://elcinema.com/en/theater/3101049/",
            "San Stefano Cinema": "https://rnscinemas.com/en/cinemas/san_stephano"
        };

        const subOptionsContainer = document.getElementById("sub-options-container");
        const subActivitySelect = document.getElementById("sub-activity-select");
        const subLabel = document.getElementById("sub-label");
        const cinemaLinkBtn = document.getElementById("cinema-link-btn");
        const extraInputContainer = document.getElementById("extra-input-container");
        const extraInput = document.getElementById("extra-input");

        function updateSubOptions() {
            const mainSelect = document.getElementById("main-activity-select");
            const selectedActivity = mainSelect.value;
            const data = activities[selectedActivity];

            subOptionsContainer.style.display = "none";
            cinemaLinkBtn.style.display = "none";
            extraInputContainer.style.display = "none";
            subActivitySelect.innerHTML = ""; 

            if (selectedActivity === "Other") {
                extraInputContainer.style.display = "block";
                extraInput.placeholder = "What's the plan? üí≠";
                extraInput.value = "";
                return;
            }

            if (data && data.options.length > 0) {
                subOptionsContainer.style.display = "block";
                subLabel.innerText = data.label;
                
                let defaultOpt = document.createElement("option");
                defaultOpt.value = "";
                defaultOpt.text = "Select...";
                defaultOpt.disabled = true;
                defaultOpt.selected = true;
                subActivitySelect.appendChild(defaultOpt);

                data.options.forEach(option => {
                    const optElement = document.createElement("option");
                    optElement.value = option;
                    optElement.innerText = option;
                    subActivitySelect.appendChild(optElement);
                });
            }
        }

        function handleSubSelection() {
            const mainActivity = document.getElementById("main-activity-select").value;
            const subActivity = subActivitySelect.value;

            cinemaLinkBtn.style.display = "none";
            extraInputContainer.style.display = "none";

            if (mainActivity === "Cinema") {
                const link = cinemaLinks[subActivity];
                if (link) {
                    cinemaLinkBtn.href = link;
                    cinemaLinkBtn.style.display = "block"; 
                    extraInputContainer.style.display = "block";
                    extraInput.placeholder = "Which movie and what time? üïí";
                    extraInput.value = ""; 
                }
            }
            
            if ((mainActivity === "Coffee Date" || mainActivity === "Dine Out") && subActivity.includes("another idea")) {
                extraInputContainer.style.display = "block";
                extraInput.placeholder = "Tell me where? üí≠";
                extraInput.value = "";
            }
        }

        const question = document.getElementById("question");
        const mainImage = document.getElementById("mainImage");
        const yesBtn = document.getElementById("yesBtn");
        const noBtn = document.getElementById("noBtn");
        const reasonDisplay = document.getElementById("reason-display");
        const initialButtons = document.getElementById("initial-buttons");
        const datePlanner = document.getElementById("date-planner");

        let noClickCount = 0;
        let yesBtnSize = 1.1; // Initial font size in rem
        const noPhrases = ["No", "Are you sure?", "Really?", "Think again!", "Last chance!", "Please?", "I'll be sad!", "So sad..."];

        function handleNo() {
            noClickCount++;
            
            // Change No button text
            const textIndex = Math.min(noClickCount, noPhrases.length - 1);
            noBtn.innerText = noPhrases[textIndex];
            
            // Make Yes button bigger
            yesBtnSize += 0.5; // Increases size by 0.5rem every click
            yesBtn.style.fontSize = yesBtnSize + "rem";
        }

        function handleYes() {
            question.innerText = "Yay! I love you! ‚ù§Ô∏è";
            mainImage.src = "https://media.tenor.com/gUiu1zyxfzYAAAAi/bear-kiss-bear-kisses.gif";
            initialButtons.style.display = 'none';
            reasonDisplay.style.display = 'none';
            datePlanner.style.display = 'block';
            triggerBigConfetti();
        }

        const reasons = ["Because you didn't give up on me.","Because i can be vulnerable with you.","Because i love your sense of humor.","Because you forgive me even when i mess up.","Because you're my favorite person to be around.","Because i can talk to you about anything.","Because i love the way you look at me.","Because you make me feel loved.","Because i can always be myself around you.","Because you make me want to be a better person.","Because you have the cutest smile.", "Because you always make me smile.", "Because you give the best hugs.", "Because you're my best friend.", "Because you're smart", "Because life is just better with you.", "Because you support me.", "Because you're my love.", "because you're beautiful"];
        function showReason() {
            const randomReason = reasons[Math.floor(Math.random() * reasons.length)];
            reasonDisplay.innerText = randomReason;
            reasonDisplay.style.transform = "scale(1.1)";
            setTimeout(() => reasonDisplay.style.transform = "scale(1)", 200);
        }

        function sendWhatsapp() {
            const mainActivity = document.getElementById("main-activity-select").value;
            const subActivity = subActivitySelect.value;
            const extraText = document.getElementById("extra-input").value;
            
            if(!mainActivity) {
                alert("Please choose an activity first! üòä");
                return;
            }

            let message = `SEIFOOO!! I said YES! ‚ù§Ô∏è For our date, I choose ${mainActivity}`;
            if (subActivity && subActivity !== "Select...") message += ` (${subActivity})`;
            if (extraText) message += ` and specifically: ${extraText}`;
            message += `.`;
            
            window.location.href = `https://wa.me/${yourPhoneNumber}?text=${encodeURIComponent(message)}`;
        }

        function createBgHearts() {
            const heartBg = document.getElementById("heartBg");
            const heartEmojis = ["‚ù§Ô∏è", "üíñ", "üíù", "üíï", "üíó"];
            for (let i = 0; i < 20; i++) {
                let heart = document.createElement("div");
                heart.className = "heart-item";
                heart.innerText = heartEmojis[Math.floor(Math.random() * heartEmojis.length)];
                heart.style.left = Math.random() * 100 + "%";
                heart.style.animationDuration = (Math.random() * 5 + 10) + "s"; 
                heartBg.appendChild(heart);
            }
        }

        function triggerBigConfetti() {
            const colors = ['#ff0000', '#ff69b4', '#FF1493', '#C71585'];
            confetti({ particleCount: 150, spread: 100, origin: { y: 0.6 }, colors: colors });
        }
    </script>
</body>
</html>
